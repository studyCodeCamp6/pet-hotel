{"ast":null,"code":"import axios from 'axios';\nimport LocalStorageService from '../services/localStorageService';\nimport localStorageService from '../services/localStorageService';\nimport { notification } from 'antd';\naxios.defaults.baseURL = 'http://localhost:8000';\naxios.interceptors.request.use(config => {\n  if (config.url.includes('/login') || config.url.includes('/register')) return config;\n  const token = LocalStorageService.getToken();\n\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  return config;\n}, err => {\n  Promise.reject(err);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, err => {\n  var _err$response;\n\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n    localStorageService.removeToken();\n    window.location.reload();\n    notification.error({\n      message: 'กรุณาเข้าสู่ระบบใหม่'\n    });\n    return Promise.reject(err);\n  }\n\n  return Promise.reject(err);\n});\nexport default axios;","map":{"version":3,"sources":["/Users/kaninsrijundorn/Desktop/Project/jitpet/frontend_admin/src/axios.js"],"names":["axios","LocalStorageService","localStorageService","notification","defaults","baseURL","interceptors","request","use","config","url","includes","token","getToken","headers","err","Promise","reject","response","status","removeToken","window","location","reload","error","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AACA,SAASC,YAAT,QAA6B,MAA7B;AAEAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAEAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACGC,MAAD,IAAY;AACV,MAAIA,MAAM,CAACC,GAAP,CAAWC,QAAX,CAAoB,QAApB,KAAiCF,MAAM,CAACC,GAAP,CAAWC,QAAX,CAAoB,WAApB,CAArC,EACE,OAAOF,MAAP;AAEF,QAAMG,KAAK,GAAGX,mBAAmB,CAACY,QAApB,EAAd;;AAEA,MAAID,KAAJ,EAAW;AACTH,IAAAA,MAAM,CAACK,OAAP,CAAe,eAAf,IAAmC,UAASF,KAAM,EAAlD;AACD;;AAED,SAAOH,MAAP;AACD,CAZH,EAaGM,GAAD,IAAS;AACPC,EAAAA,OAAO,CAACC,MAAR,CAAeF,GAAf;AACD,CAfH;AAkBAf,KAAK,CAACM,YAAN,CAAmBY,QAAnB,CAA4BV,GAA5B,CACGU,QAAD,IAAc;AACZ,SAAOA,QAAP;AACD,CAHH,EAIGH,GAAD,IAAS;AAAA;;AACP,MAAI,kBAAAA,GAAG,CAACG,QAAJ,gEAAcC,MAAd,MAAyB,GAA7B,EAAkC;AAChCjB,IAAAA,mBAAmB,CAACkB,WAApB;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACApB,IAAAA,YAAY,CAACqB,KAAb,CAAmB;AACjBC,MAAAA,OAAO,EAAE;AADQ,KAAnB;AAGA,WAAOT,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD;;AAED,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAfH;AAkBA,eAAef,KAAf","sourcesContent":["import axios from 'axios';\nimport LocalStorageService from '../services/localStorageService';\nimport localStorageService from '../services/localStorageService';\nimport { notification } from 'antd';\n\naxios.defaults.baseURL = 'http://localhost:8000';\n\naxios.interceptors.request.use(\n  (config) => {\n    if (config.url.includes('/login') || config.url.includes('/register'))\n      return config;\n\n    const token = LocalStorageService.getToken();\n\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (err) => {\n    Promise.reject(err);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (err) => {\n    if (err.response?.status === 401) {\n      localStorageService.removeToken();\n      window.location.reload();\n      notification.error({\n        message: 'กรุณาเข้าสู่ระบบใหม่',\n      });\n      return Promise.reject(err);\n    }\n\n    return Promise.reject(err);\n  }\n);\n\nexport default axios;\n"]},"metadata":{},"sourceType":"module"}